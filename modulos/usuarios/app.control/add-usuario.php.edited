<?php
  /**
   * var responsÃ¡vel por popular o <SELECT> 
   */  
  $tipos_usuarios = Usuario::allTipos();

  if (array_key_exists('save',$_POST)){
  	
  	 $dados = array('nome_usuario' => array('Nome'),
  			'email_usuario'=> array('Email', 'tipo' => 'email'),
  			'telefone_usuario' => array ('Telefone', 'tipo' => 'inteiro'),
  			'dt_nascimento_usuario' => array ('Data Nascimento', 'tipo' => 'data'),
  			'login_usuario' => array ("Login",'tipo' =>'nome'),
  			'senha_usuario' => array('Senha'),
  			'confirma_senha' => array('Repita a Senha', 'tipo' => 'igualdade', 'compara' => 'senha_usuario', 'legenda_2' => 'Senha'),
  	 );
  	
  	
  	 $validacao = ValidaFormulario($dados);
  	
  	 if ($validacao === true){
      
<<<<<<< .mine
	     $usuario = new Usuario();
	     UsuarioMapper::map($usuario,$_POST);
	     
	     if (($_POST['celular_usuario']) == ''){
	         $usuario->setCelularUsuario(null);
	         
	     }
	     
	     UsuarioMapper::insert($usuario);
	     
	     $sessao->addVar('msg',2);
	     header('location:index.php');
  	 }else{
	 	Flash::addFlash($validacao);
	 }
=======
     $val = new Validate();
     
     $campos = $_POST;
     $val->setCampos('Nome',$campos['nome_usuario'])->nome();
     
     if ($val->valida){ 
        
        $usuario = new Usuario();
        UsuarioMapper::map($usuario,$_POST);

        if (($_POST['celular_usuario']) == ''){
            $usuario->setCelularUsuario(null);

        }

        UsuarioMapper::insert($usuario);
>>>>>>> .r97

        $sessao->addVar('msg',2);
        header('location:index.php');
        
     }else{
         foreach ($val->erros() as $erro){
             echo $erro;
         }
         
     }
  }
  
?>
